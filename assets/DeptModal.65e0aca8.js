var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,s=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&n(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&n(e,a,t[a]);return e},i=(e,t,a)=>new Promise(((o,r)=>{var l=e=>{try{s(a.next(e))}catch(t){r(t)}},n=e=>{try{s(a.throw(e))}catch(t){r(t)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(l,n);s((a=a.apply(e,t)).next())}));import{B as d,a as c}from"./index.28a38f1a.js";import{_ as p}from"./BasicForm.2c35510a.js";import{u}from"./useForm.232c0327.js";import{ag as m,be as f,A as b,r as g,j as v,u as y,_ as h,F as I,G as P,a3 as j,x,a1 as O}from"./vendor.18836d94.js";/* empty css              */import{a as w,u as F,f as B}from"./system.9030f79c.js";const M=[{title:"部门名称",dataIndex:"deptName",width:160,align:"left"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=0==~~e.status,a=t?"启用":"停用";return m(f,{color:t?"green":"red"},(()=>a))}},{title:"创建时间",dataIndex:"createTime",width:180},{title:"备注",dataIndex:"remark"}],S=[{field:"deptName",label:"部门名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],_=[{field:"deptName",label:"部门名称",component:"Input",required:!0},{field:"parentId",label:"上级部门",component:"TreeSelect",componentProps:{replaceFields:{title:"deptName",key:"id",value:"deptId"},getPopupContainer:()=>document.body},required:!1},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},required:!0},{label:"备注",field:"remark",component:"InputTextArea"}];var N=b({name:"DeptModal",components:{BasicModal:d,BasicForm:p},emits:["success","register"],setup(e,{emit:o}){const r=g(!0);let l="";const[n,{resetFields:d,setFieldsValue:p,updateSchema:m,validate:f}]=u({labelWidth:100,schemas:_,showActionButtonGroup:!1}),[b,{setModalProps:h,closeModal:I}]=c((e=>i(this,null,(function*(){d(),h({confirmLoading:!1}),r.value=!!(null==e?void 0:e.isUpdate),y(r)&&(p(s({},e.record)),l=e.record.deptId);const t=yield w();m({field:"parentId",componentProps:{treeData:t}})}))));return{registerModal:b,registerForm:n,getTitle:v((()=>y(r)?"编辑部门":"新增部门")),handleSubmit:function(){return i(this,null,(function*(){try{const i=yield f();h({confirmLoading:!0}),r.value?yield F((e=s({},i),n={deptId:l},t(e,a(n)))):yield B(i),I(),o("success")}finally{h({confirmLoading:!1})}var e,n}))}}}});N.render=function(e,t,a,o,r,l){const n=h("BasicForm"),s=h("BasicModal");return I(),P(s,O(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:j((()=>[x(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var R=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:N});export{R as D,N as _,M as c,S as s};
