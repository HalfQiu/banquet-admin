var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,s=(e,t)=>{for(var o in t||(t={}))r.call(t,o)&&n(e,o,t[o]);if(a)for(var o of a(t))l.call(t,o)&&n(e,o,t[o]);return e},i=(e,t,o)=>new Promise(((a,r)=>{var l=e=>{try{s(o.next(e))}catch(t){r(t)}},n=e=>{try{s(o.throw(e))}catch(t){r(t)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,n);s((o=o.apply(e,t)).next())}));import{ag as d,bc as c,A as p,r as u,j as m,u as f,_ as b,L as g,F as v,a3 as y,x as h,a1 as I}from"./vendor.8887d027.js";import{B as P,a as j}from"./index.694555f1.js";import{_ as x}from"./BasicForm.24833f51.js";import{u as O}from"./useForm.341a37c5.js";/* empty css              */import{a as w,u as F,f as B}from"./system.6ecb946a.js";const M=[{title:"部门名称",dataIndex:"deptName",width:160,align:"left"},{title:"排序",dataIndex:"orderNo",width:50},{title:"状态",dataIndex:"status",width:80,customRender:({record:e})=>{const t=0==~~e.status,o=t?"启用":"停用";return d(c,{color:t?"green":"red"},(()=>o))}},{title:"创建时间",dataIndex:"createTime",width:180},{title:"备注",dataIndex:"remark"}],S=[{field:"deptName",label:"部门名称",component:"Input",colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],_=[{field:"deptName",label:"部门名称",component:"Input",required:!0},{field:"parentId",label:"上级部门",component:"TreeSelect",componentProps:{replaceFields:{title:"deptName",key:"id",value:"deptId"},getPopupContainer:()=>document.body},required:!1},{field:"orderNo",label:"排序",component:"InputNumber",required:!0},{field:"status",label:"状态",component:"RadioButtonGroup",defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]},required:!0},{label:"备注",field:"remark",component:"InputTextArea"}];var N=p({name:"DeptModal",components:{BasicModal:P,BasicForm:x},emits:["success","register"],setup(e,{emit:a}){const r=u(!0);let l="";const[n,{resetFields:d,setFieldsValue:c,updateSchema:p,validate:b}]=O({labelWidth:100,schemas:_,showActionButtonGroup:!1}),[g,{setModalProps:v,closeModal:y}]=j((e=>i(this,null,(function*(){d(),v({confirmLoading:!1}),r.value=!!(null==e?void 0:e.isUpdate),f(r)&&(c(s({},e.record)),l=e.record.deptId);const t=yield w();p({field:"parentId",componentProps:{treeData:t}})}))));return{registerModal:g,registerForm:n,getTitle:m((()=>f(r)?"编辑部门":"新增部门")),handleSubmit:function(){return i(this,null,(function*(){try{const i=yield b();v({confirmLoading:!0}),r.value?yield F((e=s({},i),n={deptId:l},t(e,o(n)))):yield B(i),y(),a("success")}finally{v({confirmLoading:!1})}var e,n}))}}}});N.render=function(e,t,o,a,r,l){const n=b("BasicForm"),s=b("BasicModal");return g(),v(s,I(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:y((()=>[h(n,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};var R=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:N});export{R as D,N as _,M as c,S as s};
