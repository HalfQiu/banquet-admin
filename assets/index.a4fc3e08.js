var r;import{A as e,r as o,R as i,Z as t,q as s,_ as a,L as n,F as d,a8 as l,ap as c,G as m,H as f,x as p,a3 as u,aa as j,J as b}from"./vendor.517bedfb.js";import x from"./DetailModal.04b737d7.js";import{_ as g}from"./TableImg.7d5459f2.js";import{_ as y}from"./BasicForm.dc1a8526.js";import{u as v}from"./useTable.04146873.js";import{b as E}from"./index.c8e28192.js";import{aG as L,e as h,aL as w,i as A}from"./index.a6fa69dd.js";import{getColumns as C}from"./data.288a0c11.js";import"./index.d9324104.js";/* empty css              */import"./useDescription.e91fe5f8.js";/* empty css              *//* empty css              */import"./useForm.d9f38e8c.js";/* empty css              *//* empty css              *//* empty css              */import"./useWindowSizeFn.45b2e0d5.js";import"./onMountedOrActivated.e21098c8.js";/* empty css              */import"./useSortable.02c5aeae.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.f2387e1f.js";/* empty css              *//* empty css              *//* empty css              */import"./download.6d82b677.js";import"./base64Conver.bb012c73.js";import"./index.f9866302.js";(r||(r={})).Error="/error";var D=e({name:"ErrorHandler",components:{DetailModal:x,BasicTable:g,TableAction:y},setup(){const e=o(),a=o([]),{t:n}=h(),d=w(),[l,{setTableData:c}]=v({title:n("sys.errorLog.tableTitle"),columns:C(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[m,{openModal:f}]=E();i((()=>d.getErrorLogInfoList),(r=>{t((()=>{c(s(r))}))}),{immediate:!0});const{createMessage:p}=A();return p.info(n("sys.errorLog.enableMessage")),{register:l,registerModal:m,handleDetail:function(r){e.value=r,f(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){a.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return e=this,o=null,i=function*(){yield L.get({url:r.Error})},new Promise(((r,t)=>{var s=r=>{try{n(i.next(r))}catch(e){t(e)}},a=r=>{try{n(i.throw(r))}catch(e){t(e)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,a);n((i=i.apply(e,o)).next())}));var e,o,i},imgList:a,rowInfo:e,t:n}}});const M={class:"p-4"};D.render=function(r,e,o,i,t,s){const x=a("DetailModal"),g=a("a-button"),y=a("TableAction"),v=a("BasicTable");return n(),d("div",M,[(n(!0),d(l,null,c(r.imgList,(r=>m((n(),d("img",{key:r,src:r},null,8,["src"])),[[f,!1]]))),128)),p(x,{info:r.rowInfo,onRegister:r.registerModal},null,8,["info","onRegister"]),p(v,{onRegister:r.register,class:"error-handle-table"},{toolbar:u((()=>[p(g,{onClick:r.fireVueError,type:"primary"},{default:u((()=>[j(b(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),p(g,{onClick:r.fireResourceError,type:"primary"},{default:u((()=>[j(b(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),p(g,{onClick:r.fireAjaxError,type:"primary"},{default:u((()=>[j(b(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:u((({record:e})=>[p(y,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export{D as default};
