import{A as t,r as e,O as i,j as s,u as r,R as a,Y as l,Z as n,x as o,bA as m,B as d,D as c,_ as u,L as h,F as p,J as g,K as f,aa as v}from"./vendor.517bedfb.js";import{ac as b,ar as _,ab as x}from"./index.a6fa69dd.js";/* empty css              */import{P as H}from"./index.89ec6d4d.js";/* empty css              *//* empty css              */import"./onMountedOrActivated.e21098c8.js";import"./useWindowSizeFn.45b2e0d5.js";import"./useContentViewHeight.779ab64e.js";function S(t,e="px"){return null==t||""===t?void 0:isNaN(+t)?String(t):`${Number(t)}${e}`}var N=t({name:"VirtualScroll",props:{height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String],bench:{type:[Number,String],default:0},itemHeight:{type:[Number,String],required:!0},items:{type:Array,default:()=>[]}},setup(t,{slots:m}){const d=e(null),c=i({first:0,last:0,scrollTop:0}),u=s((()=>parseInt(t.bench,10))),h=s((()=>parseInt(t.itemHeight,10))),p=s((()=>Math.max(0,c.first-r(u)))),g=s((()=>Math.min((t.items||[]).length,c.last+r(u)))),f=s((()=>({height:S((t.items||[]).length*r(h))}))),v=s((()=>{const e={},i=S(t.height),s=S(t.minHeight),r=S(t.minWidth),a=S(t.maxHeight),l=S(t.maxWidth),n=S(t.width);return i&&(e.height=i),s&&(e.minHeight=s),r&&(e.minWidth=r),a&&(e.maxHeight=a),l&&(e.maxWidth=l),n&&(e.width=n),e}));function x(e){const i=r(d);if(!i)return 0;const s=parseInt(t.height||0,10)||i.clientHeight;return e+Math.ceil(s/r(h))}function H(){const t=r(d);t&&(c.scrollTop=t.scrollTop,c.first=Math.floor(c.scrollTop/r(h)),c.last=x(c.first))}function N(){const{items:e=[]}=t;return e.slice(r(p),r(g)).map(j)}function j(t,e){const i=S((e+=r(p))*r(h));return o("div",{class:"virtual-scroll__item",style:{top:i},key:e},[_(m,"default",{index:e,item:t})])}return a([()=>t.itemHeight,()=>t.height],(()=>{H()})),l((()=>{c.last=x(0),n((()=>{const t=r(d);t&&b({el:t,name:"scroll",listener:H,wait:0})}))})),()=>o("div",{class:"virtual-scroll",style:r(v),ref:d},[o("div",{class:"virtual-scroll__container",style:r(f)},[N()])])}});N.__scopeId="data-v-c1e759d4";const j=x(N),w=(()=>{const t=[];for(let e=1;e<2e4;e++)t.push({title:"列表项"+e});return t})();var W=t({components:{VScroll:j,Divider:m,PageWrapper:H},setup:()=>({data:w})});const y=f();d("data-v-677b6744");const I=v("基础滚动示例"),M={class:"virtual-scroll-demo-wrap"},A={class:"virtual-scroll-demo__item"},T=v("即使不可见，也预先加载50条数据，防止空白"),V={class:"virtual-scroll-demo-wrap"},D={class:"virtual-scroll-demo__item"};c();const P=y(((t,e,i,s,r,a)=>{const l=u("Divider"),n=u("VScroll"),m=u("PageWrapper");return h(),p(m,{class:"virtual-scroll-demo"},{default:y((()=>[o(l,null,{default:y((()=>[I])),_:1}),o("div",M,[o(n,{itemHeight:41,items:t.data,height:300,width:300},{default:y((({item:t})=>[o("div",A,g(t.title),1)])),_:1},8,["items"])]),o(l,null,{default:y((()=>[T])),_:1}),o("div",V,[o(n,{itemHeight:41,items:t.data,height:300,width:300,bench:50},{default:y((({item:t})=>[o("div",D,g(t.title),1)])),_:1},8,["items"])])])),_:1})}));W.render=P,W.__scopeId="data-v-677b6744";export{W as default};
