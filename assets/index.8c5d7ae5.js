var r;import{A as e,r as o,R as i,Z as t,q as s,_ as a,L as n,F as l,a8 as d,ap as c,G as m,H as f,x as p,a3 as u,aa as j,J as b}from"./vendor.8887d027.js";import x from"./DetailModal.869ec25a.js";import{_ as g}from"./TableImg.8709f9ad.js";import{g as y}from"./BasicForm.24833f51.js";import{u as v}from"./useTable.b198c16a.js";import{b as E}from"./index.694555f1.js";import{az as h,e as L,b9 as w,i as A}from"./index.139ebaf4.js";import{getColumns as C}from"./data.320118e0.js";import"./index.f1ba5883.js";/* empty css              */import"./useDescription.7eaaecc4.js";/* empty css              *//* empty css              */import"./useForm.341a37c5.js";/* empty css              *//* empty css              *//* empty css              */import"./useWindowSizeFn.fddb5d97.js";import"./onMountedOrActivated.1f4114eb.js";/* empty css              */import"./useSortable.67b4cd15.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.1ff1fcb7.js";/* empty css              *//* empty css              *//* empty css              */import"./download.53426b47.js";import"./base64Conver.bb012c73.js";import"./index.7e041dc6.js";(r||(r={})).Error="/error";var D=e({name:"ErrorHandler",components:{DetailModal:x,BasicTable:g,TableAction:y},setup(){const e=o(),a=o([]),{t:n}=L(),l=w(),[d,{setTableData:c}]=v({title:n("sys.errorLog.tableTitle"),columns:C(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[m,{openModal:f}]=E();i((()=>l.getErrorLogInfoList),(r=>{t((()=>{c(s(r))}))}),{immediate:!0});const{createMessage:p}=A();return p.info(n("sys.errorLog.enableMessage")),{register:d,registerModal:m,handleDetail:function(r){e.value=r,f(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){a.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return e=this,o=null,i=function*(){yield h.get({url:r.Error})},new Promise(((r,t)=>{var s=r=>{try{n(i.next(r))}catch(e){t(e)}},a=r=>{try{n(i.throw(r))}catch(e){t(e)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,a);n((i=i.apply(e,o)).next())}));var e,o,i},imgList:a,rowInfo:e,t:n}}});const M={class:"p-4"};D.render=function(r,e,o,i,t,s){const x=a("DetailModal"),g=a("a-button"),y=a("TableAction"),v=a("BasicTable");return n(),l("div",M,[(n(!0),l(d,null,c(r.imgList,(r=>m((n(),l("img",{key:r,src:r},null,8,["src"])),[[f,!1]]))),128)),p(x,{info:r.rowInfo,onRegister:r.registerModal},null,8,["info","onRegister"]),p(v,{onRegister:r.register,class:"error-handle-table"},{toolbar:u((()=>[p(g,{onClick:r.fireVueError,type:"primary"},{default:u((()=>[j(b(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),p(g,{onClick:r.fireResourceError,type:"primary"},{default:u((()=>[j(b(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),p(g,{onClick:r.fireAjaxError,type:"primary"},{default:u((()=>[j(b(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:u((({record:e})=>[p(y,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export{D as default};
